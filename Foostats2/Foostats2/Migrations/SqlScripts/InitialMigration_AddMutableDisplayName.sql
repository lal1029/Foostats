CREATE TABLE [dbo].[Matches] (
    [Id] [int] NOT NULL IDENTITY,
    [Score1] [int] NOT NULL,
    [Score2] [int] NOT NULL,
    [Team1Validated] [datetime],
    [Team2Validated] [datetime],
    [Team1_Id] [int],
    [Team2_Id] [int],
    CONSTRAINT [PK_dbo.Matches] PRIMARY KEY ([Id])
)
CREATE INDEX [IX_Team1_Id] ON [dbo].[Matches]([Team1_Id])
CREATE INDEX [IX_Team2_Id] ON [dbo].[Matches]([Team2_Id])
CREATE TABLE [dbo].[Teams] (
    [Id] [int] NOT NULL IDENTITY,
    [DisplayName] [nvarchar](max),
    [Player1_Id] [int],
    [Player2_Id] [int],
    CONSTRAINT [PK_dbo.Teams] PRIMARY KEY ([Id])
)
CREATE INDEX [IX_Player1_Id] ON [dbo].[Teams]([Player1_Id])
CREATE INDEX [IX_Player2_Id] ON [dbo].[Teams]([Player2_Id])
CREATE TABLE [dbo].[Players] (
    [Id] [int] NOT NULL IDENTITY,
    [DisplayName] [nvarchar](max),
    [Password] [nvarchar](max),
    [Salt] [nvarchar](max),
    CONSTRAINT [PK_dbo.Players] PRIMARY KEY ([Id])
)
CREATE TABLE [dbo].[Trueskills] (
    [Id] [int] NOT NULL IDENTITY,
    [StandardDeviation] [float] NOT NULL,
    [Mean] [float] NOT NULL,
    [ConservativeRating] [float] NOT NULL,
    [Player_Id] [int],
    CONSTRAINT [PK_dbo.Trueskills] PRIMARY KEY ([Id])
)
CREATE INDEX [IX_Player_Id] ON [dbo].[Trueskills]([Player_Id])
CREATE TABLE [dbo].[RegistryEntries] (
    [ParentKey] [nvarchar](128) NOT NULL,
    [ChildKey] [nvarchar](128) NOT NULL,
    [Value] [nvarchar](max),
    CONSTRAINT [PK_dbo.RegistryEntries] PRIMARY KEY ([ParentKey], [ChildKey])
)
CREATE TABLE [dbo].[WinLosses] (
    [Id] [int] NOT NULL IDENTITY,
    [Win] [int] NOT NULL,
    [Loss] [int] NOT NULL,
    [Player_Id] [int],
    CONSTRAINT [PK_dbo.WinLosses] PRIMARY KEY ([Id])
)
CREATE INDEX [IX_Player_Id] ON [dbo].[WinLosses]([Player_Id])
ALTER TABLE [dbo].[Matches] ADD CONSTRAINT [FK_dbo.Matches_dbo.Teams_Team1_Id] FOREIGN KEY ([Team1_Id]) REFERENCES [dbo].[Teams] ([Id])
ALTER TABLE [dbo].[Matches] ADD CONSTRAINT [FK_dbo.Matches_dbo.Teams_Team2_Id] FOREIGN KEY ([Team2_Id]) REFERENCES [dbo].[Teams] ([Id])
ALTER TABLE [dbo].[Teams] ADD CONSTRAINT [FK_dbo.Teams_dbo.Players_Player1_Id] FOREIGN KEY ([Player1_Id]) REFERENCES [dbo].[Players] ([Id])
ALTER TABLE [dbo].[Teams] ADD CONSTRAINT [FK_dbo.Teams_dbo.Players_Player2_Id] FOREIGN KEY ([Player2_Id]) REFERENCES [dbo].[Players] ([Id])
ALTER TABLE [dbo].[Trueskills] ADD CONSTRAINT [FK_dbo.Trueskills_dbo.Players_Player_Id] FOREIGN KEY ([Player_Id]) REFERENCES [dbo].[Players] ([Id])
ALTER TABLE [dbo].[WinLosses] ADD CONSTRAINT [FK_dbo.WinLosses_dbo.Players_Player_Id] FOREIGN KEY ([Player_Id]) REFERENCES [dbo].[Players] ([Id])
CREATE TABLE [dbo].[__MigrationHistory] (
    [MigrationId] [nvarchar](255) NOT NULL,
    [Model] [varbinary](max) NOT NULL,
    [ProductVersion] [nvarchar](32) NOT NULL,
    CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId])
)
BEGIN TRY
    EXEC sp_MS_marksystemobject 'dbo.__MigrationHistory'
END TRY
BEGIN CATCH
END CATCH
INSERT INTO [__MigrationHistory] ([MigrationId], [Model], [ProductVersion]) VALUES ('201309030531131_InitialCreate', 0x1F8B0800000000000400ED5C5B6FDB36147E1FB0FF60E8691B303BD1F6D015F6862E6986624D1BC4D9F6583012ED10D36D229DC5BF6D0FFB49FB0B2375A17895A88B63B7E84B118BE4C773788E0E0F79F4F5BF7FFE5DFEF41447B347986394262BEF7C7EE6CD6012A4214AB62B6F4736DFBEF07EFAF1CB2F96AFC3F869F67BDDEF3BD68F8E4CF0CA7B20247BB958E0E001C600CF6314E4294E37641EA4F10284E9C23F3BFB61717EBE8014C2A358B3D9F276971014C3E207FD79912601CCC80E44D76908235C3DA72DEB0275F60EC4106720802BEF2A4D310104FBF3B2AF377B152140E558C368E3CDB2EF5FFE86E19AE469B25D67802010DDED3348DB3720C2B092FA65F6BDABE0673E137C019224A5D352ED0729EE7195A852AFA9F264CFC42A145B79D780040F6217DAE957B8971ED04737799AC19CEC6FE1A61AF826F4660B79DC421DC8870963D8DCF4AF847CE77BB377BB2802F711E44B44D7704DD21CFE0213980302C31B4008CC13361616B26BB32A73AC033AFCBC6B1E070C7F1CC61D04F1F9EF20422153A3C6BAA43FEEA8FB897024DF39A1F9C3D1DE8147B42D5CC824A537BB8551D18A1F5056BAF3BC708C0F55FB559EC6B76954FB4BF9F8C33ADDE5019DEC2ED5DBEE40BE85A49F207E8720BE5910BF4510DF28C872D1BC07AD6F0783F8945E8E4B84B308ECD98F7A321AAF68C0A52B8B9E60F816265BF2C027BC064FF513FAA737FB2D41343E73271BEA74375404989BDD8EADF807DEA131B7F85CB3B7D4D8D7F3CA7166DF13807D8B34BAF7498DA3DCAF04F9EC80031D5099FB7A4758E7638A700330FE3BCDC3679F780D2272E049DD832A1D8AFF4451F42939F69A8024047978091F5195AB557B74BAA333F54E1FAE21180B41535B0CF3472ACD23BCA5FF329BF703EC8899E690595BF743DD49089B4A9B1E3AD50EA3C2E72DDC224CF23D6DC8F7439CED06E4D4FAB4ABBA32C6DE170F280A0D9DBB1D5498A7D72B7AEEBF687945DD9C840BFDDC33D36C7677E808ECEC2A7FA0E46D8AF1A71491A84AE34E30C582F443181230AAA537840BB9450B164A739F50F10AE33428E3B490E9F3BC5356EA7512CEDA92D0D281EB7491FAEB2E22288B5040275E79DF688B64C1ABE517F0EA259111CFE6F373554D4121673D7D173DFD89F5F49F494FF1F86A13CB78966DA42AAF467AA8693AFF76ACDA443ADA4D693C264FA2A3D19293EBA8A513561FB3E61682743CF3ECE3BCB69CE4B00EAC84459B74B618D9C8566F6D3D54B644D629152EE3324D5109407487AB94AE6F58D973F84434ADD9983524A2FF43AA5913E465B7D61494C73367358D2E9DB86370B902A6E1F5DA74CDDE38A32E41D3D68152E7B8061039FDED02E26EA2E1F0160541B0ACBCA6CDFD8DD0C574BFA326571D3B2D17999B4ECBCA3BF6560181DB4FCDDD64B5FAA9EC77A8ECBBA9EC8F56D93FACCAD2E5B0AEB175F3EDDC7E0569F9DBDDA2B169C7ED5AB251EA1A0D6CDD873B77E2C1EA1AED3B95BAFA11DEE0D4ADFBB2DBCE2C8A6E0B786E5BF1419C5C3D98E88BD0B647BBECD282D89620EBB22D8F52BE3E21F19DB829802ECA0A685D295D584AA5CB6B9065F4F02E944EAB27B3755937BDF876DDBF721997188B001B0A985C5A3E133D2B832D545AD91D5808AF508EC92520E01EB023EB45186BDD1CF38E7A3639FDD00D566FA0757FF6B79CE0D425E4B9A1FE2A2EE115D52AA6E7FD4241A8860B7D5C51B70611C80D170E1769B48B13DBA545DBE8BAA62A22D4CF7AA2F80614BF0F8A5A5715D1D4B67EA87E0BAADF8ABA5C28E6525D62A1F984F27EAA2EE6E48065BC1FE57E7A81B3C0E8F23EF3B0C3389F54AF1161A48693314A1D824799C5BCA13818C636F0B44C63C33355E8445853BB3B7A537C13319BA73D2259514D93E258F1E4649CD05262EB1D1D6C302E21C23EF6409B945E81932CA437F770CCA21A27B962F1C41DC1548C13F14CED27E34EFC92619437B594E39C3CAA63BCFDB5E7C535F9BDB7D6F65AACC8AB6592ED2C85BF36A4AAFA25C2548F4EC6EAC69A585FA35B401CCC6D1D7998F05194CBC4E1C503F7F1E5E94D04309FE70E6F4EF9ACA7A78CCDF55C4762D87474C9FFD841D59055AB7770FA723819B3463119952D089FBAA754D5517CA054BDA5A1613E44C52DFF1BCC8AA9BC90EAA6AB7A901F637FDFD5FEFE14F6F727B1BF3FB1FDFD13B6BF49D7D1F6972E6EBBAE25EA7E4E770F868536DCCE0E5CE7126302DB1BEE9C4FCAF4364527347CFB7B2FF51B6FF8B1AF7D8931A9E14FF39DB7293A3EE26B97F92E073EDED9F958670AB496EBFA515BC0243B80A52271521E615577B44BA8858DEEF4DDEA0EF63382BAE6E6E2C5D15DC15C99F9541C41ABEEA85DF859845779946ACEB2AAAC74B3E3B4524BD9C59B51E51F51C8CA2CEB3D26309EB30EF3F55FD14584E8E9A7E9700D12B48198DCA57FC264E5F967672F148ADD00FADB02E3500A5627C381434CF7CE8F3C8750D7CEA5294691DF862098A96FEC07998CFA3606AD4CB08CFA390BD407E2C4E96607F14303CB26790479F000F2AF62F0F4756FE68C70261E6C39F16035B5ED8EC5D5FA28AC67A75E8D730A854E350A4CA448F500FA18684F87D9696C8CA74D9482FE9B8648781A8660E73B0DC313F2AEA983C5C7CB4CAADF0C9D0D3492783419B0C42B3AC48B7C34AED0415E6381263424D713494243C64FF7920DE38094DF7AF766304818D5D7E6FD6915D431207BBF108858F022393DA369D5A09B1C2501CA40244AAC1F505D9C8D2D1E87535B2E610613E64592562E13B5DDCE7254C5EBBB549F9806F3D9CCD398D97617FB0C667662E889575A3DA92AFDFD65224B5B3FF69ADCD6CE3ED55E6D7D5E63DB5FEACFC69ED0D8C77CB35D397E9319BC611B0C63079EBAE95BBEDBB3D9FF78E677643A4E657CCEB418C2913C71C3DBBFB63AB6D9CD7C4F9D9EA15ACDC0F8B4F33DCB8AC3CA0BEF536ADEF20061E15519C9A0562EA809D8CCB632D3445B58A226681B8D672085D4287DDDDC3D8BC223D56652DA4DB3895D9083311CC8A8A669AA46C3048763318A7ED37C1BD5C9E2D3B97FA7C2533C2585266213CB2FA14894E8A2D3762EC4F1F8C227A6D4B49CD181CAA9F1B09D5B7A5C4EE8301595C8D8C61D9D86F5A9D7FF691620FC1FBA3407C168DB40B06F1A121848FB3FEFF326D9A47526A2485477D1CA0204843439789513B40101A1CD01C4B8B8DC2F6E7A57DEEBF81E866F92F73B92ED085519C6F79174D5CDD299B6F90B6AAB2CF3F27D56FC374553A850D7AEDF273FEF501472B9AFF4FB511B04CB93AA3B5F664BC2EE7EB77B8EF42E4D1C81AAE5E3E9DD1D8CB38882E1F7C91A3C42BB6CDD6B28AFD8F212816D4E33A40AA3194F7F52F70BE3A71FFF0776A1E7F0055A0000, '5.0.0.net45')
ALTER TABLE [dbo].[Players] ADD [MutableDisplayName] [nvarchar](max)
INSERT INTO [__MigrationHistory] ([MigrationId], [Model], [ProductVersion]) VALUES ('201310300045482_AddMutableDisplayName', 0x1F8B0800000000000400ED5C5B6FDB36147E1FB0FF60E8691B303BD1F6D015F6862E6986624D1BC4D9F6583012ED10D36D229DC5BF6D0FFB49FB0B2375A17895A88B63B7E84B118BE4C773788E0E0F79F4F5BF7FFE5DFEF41447B347986394262BEF7C7EE6CD6012A4214AB62B6F4736DFBEF07EFAF1CB2F96AFC3F869F67BDDEF3BD68F8E4CF0CA7B20247BB958E0E001C600CF6314E4294E37641EA4F10284E9C23F3BFB61717EBE8014C2A358B3D9F276971014C3E207FD79912601CCC80E44D76908235C3DA72DEB0275F60EC4106720802BEF2A4D310104FBF3B2AF377B152140E558C368E3CDB2EF5FFE86E19AE469B25D67802010DDED3348DB3720C2B092FA65F6BDABE0673E137C019224A5D352ED0729EE7195A852AFA9F264CFC42A145B79D780040F6217DAE957B8971ED04737799AC19CEC6FE1A61AF826F4660B79DC421DC8870963D8DCF4AF847CE77BB377BB2802F711E44B44D7704DD21CFE0213980302C31B4008CC13361616B26BB32A73AC033AFCBC6B1E070C7F1CC61D04F1F9EF20422153A3C6BAA43FEEA8FB897024DF39A1F9C3D1DE8147B42D5CC824A537BB8551D18A1F5056BAF3BC708C0F55FB559EC6B76954FB4BF9F8C33ADDE5019DEC2ED5DBEE40BE85A49F207E8720BE5910BF4510DF28C872D1BC07AD6F0783F8945E8E4B84B308ECD98F7A321AAF68C0A52B8B9E60F816265BF2C027BC064FF513FAA737FB2D41343E73271BEA74375404989BDD8EADF807DEA131B7F85CB3B7D4D8D7F3CA7166DF13807D8B34BAF7498DA3DCAF04F9EC80031D5099FB7A4758E7638A700330FE3BCDC3679F780D2272E049DD832A1D8AFF4451F42939F69A8024047978091F5195AB557B74BAA333F54E1FAE21180B41535B0CF3472ACD23BCA5FF329BF703EC8899E690595BF743DD49089B4A9B1E3AD50EA3C2E72DDC224CF23D6DC8F7439CED06E4D4FAB4ABBA32C6DE170F280A0D9DBB1D5498A7D72B7AEEBF687945DD9C840BFDDC33D36C7677E808ECEC2A7FA0E46D8AF1A71491A84AE34E30C582F443181230AAA537840BB9450B164A739F50F10AE33428E3B490E9F3BC5356EA7512CEDA92D0D281EB7491FAEB2E22288B5040275E79DF688B64C1ABE517F0EA259111CFE6F373554D4121673D7D173DFD89F5F49F494FF1F86A13CB78966DA42AAF467AA8693AFF76ACDA443ADA4D693C264FA2A3D19293EBA8A513561FB3E61682743CF3ECE3BCB69CE4B00EAC84459B74B618D9C8566F6D3D54B644D629152EE3324D5109407487AB94AE6F58D973F84434ADD9983524A2FF43AA5913E465B7D61494C73367358D2E9DB86370B902A6E1F5DA74CDDE38A32E41D3D68152E7B8061039FDED02E26EA2E1F0160541B0ACBCA6CDFD8DD0C574BFA326571D3B2D17999B4ECBCA3BF6560181DB4FCDDD64B5FAA9EC77A8ECBBA9EC8F56D93FACCAD2E5B0AEB175F3EDDC7E0569F9DBDDA2B169C7ED5AB251EA1A0D6CDD873B77E2C1EA1AED3B95BAFA11DEE0D4ADFBB2DBCE2C8A6E0B786E5BF1419C5C3D98E88BD0B647BBECD282D89620EBB22D8F52BE3E21F19DB829802ECA0A685D295D584AA5CB6B9065F4F02E944EAB27B3755937BDF876DDBF721997188B001B0A985C5A3E133D2B832D545AD91D5808AF508EC92520E01EB023EB45186BDD1CF38E7A3639FDD00D566FA0757FF6B79CE0D425E4B9A1FE2A2EE115D52AA6E7FD4241A8860B7D5C51B70611C80D170E1769B48B13DBA545DBE8BAA62A22D4CF7AA2F80614BF0F8A5A5715D1D4B67EA87E0BAADF8ABA5C28E6525D62A1F984F27EAA2EE6E48065BC1FE57E7A81B3C0E8F23EF3B0C3389F54AF1161A48693314A1D824799C5BCA13818C636F0B44C63C33355E8445853BB3B7A537C13319BA73D2259514D93E258F1E4649CD05262EB1D1D6C302E21C23EF6409B945E81932CA437F770CCA21A27B962F1C41DC1548C13F14CED27E34EFC92619437B594E39C3CAA63BCFDB5E7C535F9BDB7D6F65AACC8AB6592ED2C85BF36A4AAFA25C2548F4EC6EAC69A585FA35B401CCC6D1D7998F05194CBC4E1C503F7F1E5E94D04309FE70E6F4EF9ACA7A78CCDF55C4762D87474C9FFD841D59055AB7770FA723819B3463119952D089FBAA754D5517CA054BDA5A1613E44C52DFF1BCC8AA9BC90EAA6AB7A901F637FDFD5FEFE14F6F727B1BF3FB1FDFD13B6BF49D7D1F6972E6EBBAE25EA7E4E770F868536DCCE0E5CE7126302DB1BEE9C4FCAF4364527347CFB7B2FF51B6FF8B1AF7D8931A9E14FF39DB7293A3EE26B97F92E073EDED9F958670AB496EBFA515BC0243B80A52271521E615577B44BA8858DEEF4DDEA0EF63382BAE6E6E2C5D15DC15C99F9541C41ABEEA85DF859845779946ACEB2AAAC74B3E3B4524BD9C59B51E51F51C8CA2CEB3D26309EB30EF3F55FD14584E8E9A7E9700D12B48198DCA57FC264E5F967672F148ADD00FADB02E3500A5627C381434CF7CE8F3C8750D7CEA5294691DF862098A96FEC07998CFA3606AD4CB08CFA390BD407E2C4E96607F14303CB26790479F000F2AF62F0F4756FE68C70261E6C39F16035B5ED8EC5D5FA28AC67A75E8D730A854E350A4CA448F500FA18684F87D9696C8CA74D9482FE9B8648781A8660E73B0DC313F2AEA983C5C7CB4CAADF0C9D0D3492783419B0C42B3AC48B7C34AED0415E6381263424D713494243C64FF7920DE38094DF7AF766304818D5D7E6FD6915D431207BBF108858F022393DA369D5A09B1C2501CA40244AAC1F505D9C8D2D1E87535B2E610613E64592562E13B5DDCE7254C5EBBB549F9806F3D9CCD398D97617FB0C667662E889575A3DA92AFDFD65224B5B3FF69ADCD6CE3ED55E6D7D5E63DB5FEACFC69ED0D8C77CB35D397E9319BC611B0C63079EBAE95BBEDBB3D9FF78E677643A4E657CCEB418C2913C71C3DBBFB63AB6D9CD7C4F9D9EA15ACDC0F8B4F33DCB8AC3CA0BEF536ADEF20061E15519C9A0562EA809D8CCB632D3445B58A226681B8D672085D4287DDDDC3D8BC223D56652DA4DB3895D9083311CC8A8A669AA46C3048763318A7ED37C1BD5C9E2D3B97FA7C2533C2585266213CB2FA14894E8A2D3762EC4F1F8C227A6D4B49CD181CAA9F1B09D5B7A5C4EE8301595C8D8C61D9D86F5A9D7FF691620FC1FBA3407C168DB40B06F1A121848FB3FEFF326D9A47526A2485477D1CA0204843439789513B40101A1CD01C4B8B8DC2F6E7A57DEEBF81E866F92F73B92ED085519C6F79174D5CDD299B6F90B6AAB2CF3F27D56FC374553A850D7AEDF273FEF501472B9AFF4FB511B04CB93AA3B5F664BC2EE7EB77B8EF42E4D1C81AAE5E3E9DD1D8CB38882E1F7C91A3C42BB6CDD6B28AFD8F212816D4E33A40AA3194F7F52F70BE3A71FFF0776A1E7F0055A0000, '5.0.0.net45')
